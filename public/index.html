<!DOCTYPE html>
<html>
<head>
    <title>Doxify</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <style>
        *{margin:0;padding:0;box-sizing:border-box;font-family:Arial,sans-serif;}
        body{background:#000;color:#fff;padding:20px;}
        .container{max-width:800px;margin:0 auto;}
        header{border-bottom:1px solid #333;padding:10px 0;margin-bottom:20px;}
        .logo{font-size:24px;font-weight:bold;color:#fff;text-decoration:none;}
        nav a{color:#ccc;text-decoration:none;margin-right:15px;}
        .btn{padding:8px 15px;background:#333;color:#fff;text-decoration:none;border:1px solid #333;display:inline-block;margin:10px 0;}
        .page-item{border:1px solid #333;padding:15px;margin-bottom:10px;background:#111;}
        .page-title{font-weight:bold;margin-bottom:5px;}
        .page-id{color:#888;font-size:12px;margin-bottom:8px;}
        .page-preview{color:#ccc;margin-bottom:10px;}
    </style>
</head>
<body>
    <div class="container">
        <header>
            <a href="/" class="logo">DOXIFY</a>
            <nav>
                <a href="/">Home</a>
                <a href="/write">Write</a>
            </nav>
        </header>

        <a href="/write" class="btn">Create Page</a>
        <div id="pagesContainer">Loading...</div>
    </div>

    <script>
        async function loadPages() {
            try {
                const response = await fetch('/api/list');
                const pages = await response.json();
                displayPages(pages);
            } catch {
                document.getElementById('pagesContainer').innerHTML = 'Error loading pages';
            }
        }

        function displayPages(pages) {
            const container = document.getElementById('pagesContainer');
            
            if (!pages.length) {
                container.innerHTML = 'No pages yet. <a href="/write">Create the first one!</a>';
                return;
            }

            container.innerHTML = pages.map(page => `
                <div class="page-item">
                    <div class="page-title"><a href="/${page.slug}">${page.title}</a></div>
                    <div class="page-id">/${page.slug}</div>
                    <div class="page-preview">${page.content.substring(0, 200)}...</div>
                </div>
            `).join('');
        }

        loadPages();
    </script>
</body>
</html>
